---
 - name: Giving Credentials
   hosts: local
   remote_user: root
   gather_facts: false
   connection: ssh
   vars:
   item.id: i-0f8578d7f2fb98c2c
   item.id1: i-0e96a0d55100da4c8
   tasks:
   - name: creating elb using ansible playbook
     ec2_elb_lb:
        aws_access_key: "{{ lookup('env', 'AWS_ACCESS_KEY_ID') }}"
        aws_secret_key: "{{ lookup('env', 'AWS_SECRET_ACCESS_KEY') }}"
        name: aws-blog-elb
        state: present
        region: us-east
        zones:
          - us-east-1
        listeners:
          - protocol: http
            load_balancer_port: 80
            instance_port: 80
     register: awsblog-elb
   - name: Assigning instances to elb
     local_action: ec2_elb
     args:
        instance_id: "{{ item.id,item.id1 }}"
        ec2_elbs: aws-blog-elb
        state: present
        region: us-east-1
     with_items: awsblog-webservers.tagged_instances
