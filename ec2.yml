---
 - name: Create an EC2 instance
   hosts: local
   remote_user: root
   become: true
   become_method: sudo
   gather_facts: true
   connection: ssh
   tasks:
   - name: Create security group
      module: ec2_group
      name: *my-security-group*
      description: "A Security group"
      region: us-east-1
      rules:
        - proto: tcp
          type: ssh
          from_port: 22
          to_port: 22
          cidr_ip: 0.0.0.0/0
      rules_egress:
        - proto: all
          type: all
          cidr_ip: 0.0.0.0/0
   register: basic_firewall
   - name: create an EC2 instance
     local_action:
       module: ec2
       key_name: windowsnew
       region: us-east-1
       group_id: sg-b6f015c7 
       instance_type: t2.micro
       image: ami-9e2f0988
       wait: yes
     register: basic_ec2
  
